{% extends "baseNoHeader.html" %}
{% block title %}위치 지정{% endblock %}
{% block external %}
<script language="JavaScript" src="http://map.naver.com/js/naverMap.naver?key={{ naver_map_key }}"></script>
{% endblock %}
{% block onload %}
{% endblock %}
{% block content %}
<form method="post" action=".">
  {% csrf_token %}
  <div id='mapContainer' style='width:600px;height:400px'></div>
  <SCRIPT LANGUAGE="JavaScript">
  <!--
    var currentMarker = null;

    function createMarker(pos) {
      var iconUrl = '{{ STATIC_URL }}images/map/marker.png';    // 현재 마커 아이콘
      var marker = new NMark(pos, new NIcon(iconUrl, new NSize(20, 34), new NSize(10, 34)));    // 마커를 만듭니다.
      marker.setOverAmt(0,0);
      return marker;
    }

    function clickMap(pos) {
      if (currentMarker)      // 마커가 있으면 지워주시고
        mapObj.removeOverlay(currentMarker);  // 지움
      currentMarker = createMarker(pos)      // 현재 위치를 이용해서 마커 생성
      mapObj.addOverlay(currentMarker);      // 현재 마커를 등록
      window.returnValue = pos;          // 위치 갱신
    }

    var mapObj = new NMap(document.getElementById('mapContainer'),600,400);
    mapObj.setCenterAndZoom(new NPoint(306405,551954),3);
    mapObj.enableWheelZoom();
    NEvent.addListener(mapObj,"click",clickMap);


    /* 지도 컨트롤 생성 (축척 수준, 미니맵) */
    var zoom = new NZoomControl();
    zoom.setAlign("left");
    zoom.setValign("bottom");
    mapObj.addControl(zoom);
    var svb = new NMapBtns();
    mapObj.addControl(svb);
    //mapObj.addControl(new NIndexMap());

    //addClick();
  //-->
  </SCRIPT>
  <div id="confirm" style="width: 600px; height: 40px" align="center">
    <input type="button" align="center" value="확인" class="BODYBUTTON" onclick="self.close();">
    </p></td>
  </div>

</form>
{% endblock %}
